 openapi: 3.0.3
 info:
   title: auth-service
   version: 0.1.0
 paths:
   /health:
     get:
       summary: Health check
       responses:
         "200": { description: OK }
   /ready:
     get:
       summary: Readiness check
       responses:
         "200": { description: OK }
   /live:
     get:
       summary: Liveness check
       responses:
         "200": { description: OK }
   /metrics:
     get:
       summary: Prometheus metrics
       responses:
         "200": { description: OK }

   /api/v1/auth/register:
     post:
       summary: Register
       requestBody:
         required: true
         content:
           application/json:
             schema: { type: object }
       responses:
         "201": { description: Created }

   /api/v1/auth/otp/request:
     post:
       summary: Request OTP
       requestBody:
         required: true
         content:
           application/json:
             schema: { type: object }
       responses:
         "200": { description: OK }

   /api/v1/auth/otp/verify:
     post:
       summary: Verify OTP
       requestBody:
         required: true
         content:
           application/json:
             schema: { type: object }
       responses:
         "200": { description: OK }

   /api/v1/auth/login:
     post:
       summary: Password login
       requestBody:
         required: true
         content:
           application/json:
             schema: { type: object }
       responses:
         "200": { description: OK }

   /api/v1/auth/refresh:
     post:
       summary: Refresh token
       requestBody:
         required: true
         content:
           application/json:
             schema: { type: object }
       responses:
         "200": { description: OK }

   /api/v1/auth/logout:
     post:
       summary: Logout
       requestBody:
         required: true
         content:
           application/json:
             schema: { type: object }
       responses:
         "200": { description: OK }

   /api/v1/auth/validate:
     post:
       summary: Validate token
       requestBody:
         required: true
         content:
           application/json:
             schema: { type: object }
       responses:
         "200": { description: OK }

   /api/v1/auth/me:
     get:
       summary: Get current user
       responses:
         "200": { description: OK }

   /api/v1/auth/users:
     get:
       summary: Admin list users
       responses:
         "200": { description: OK }

   /api/v1/auth/users/{user_id}/capabilities:
     patch:
       summary: Admin update user capabilities
       parameters:
         - in: path
           name: user_id
           required: true
           schema: { type: string, format: uuid }
       requestBody:
         required: true
         content:
           application/json:
             schema: { type: object }
       responses:
         "200": { description: OK }

   /api/v1/auth/internal/users/{user_id}:
     get:
       summary: Get user (internal)
       parameters:
         - in: path
           name: user_id
           required: true
           schema: { type: string, format: uuid }
       responses:
         "200": { description: OK }

   /api/v1/auth/subscribers/{subscriber_id}/staff:
     post:
       summary: Create staff for subscriber (internal/admin)
       parameters:
         - in: path
           name: subscriber_id
           required: true
           schema: { type: string, format: uuid }
       requestBody:
         required: true
         content:
           application/json:
             schema: { type: object }
       responses:
         "201": { description: Created }

 components: {}
